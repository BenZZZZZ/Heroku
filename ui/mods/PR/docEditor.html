<div class="checkAccess" data-api="checkAccess"></div>
<!-- <style type="text/css">
    .jHtmlArea{
        width: 100% !important;
    }
    .jHtmlArea .ToolBar{
        width: 100% !important;
    }
</style> -->
<div>
    <button type="button" class="btn btn-success updateDocEditor" data-api="pr/docEditor/update">Save</button>
    <button type="button" class="btn btn-success boldSelected">bold</button>
    <button type="button" class="btn btn-success italicsSelected">Italics</button>
    <button type="button" class="btn btn-success htmlView">View</button>
    <button type="button" class="btn btn-success editView">Edit</button>
</div>
<!-- <div id="docEditor" class="fil1Data" data-api="pr/docEditor">
    <div name="name">{{name}}</div>
</div> -->
<div class="fil1Data" data-api="pr/docEditor">
    <textarea name="name" cols="150%" rows="15">{{name}}</textarea>
</div>

<script type="text/javascript">
    



    $(document).ready(function(){
        $('.styleFile').attr("disabled", "disabled");
        // $('#docEditor').attr('contenteditable', true);









        $(document).on('keyup', '#docEditor textarea', function(e){
            // alert(e.keyCode);
        });

        $(document).on('click', '.updateDocEditor', function(){
            var data = {}, results,
                url = APIURL + $(this).attr('data-api');
            // data['name'] = $('#docEditor textarea').val();
            data['name'] = $('.fil1Data textarea').val();
            results = aC('POST', url, data);
            rDF(results);
        });

        $(document).on('click', '.boldSelected', function(){
            if (window.getSelection) {
                // not IE case
                var selObj = window.getSelection();
                var selRange = selObj.getRangeAt(0);

                var newElement = document.createElement("b");
                var documentFragment = selRange.extractContents();
                newElement.appendChild(documentFragment);
                selRange.insertNode(newElement);
                selObj.removeAllRanges();
            }
        });

        $(document).on('click', '.italicsSelected', function(){
            if (window.getSelection) {
                // not IE case
                var selObj = window.getSelection();
                var selRange = selObj.getRangeAt(0);

                var newElement = document.createElement("i");
                var documentFragment = selRange.extractContents();
                newElement.appendChild(documentFragment);
                selRange.insertNode(newElement);
                selObj.removeAllRanges();
            }
        });

        $(document).on('click', '.htmlView', function(){
            $('#docEditor textarea').replaceWith(
                $('<div>' + $('#docEditor textarea').val() + '</div>')
            );
        });

        $(document).on('click', '.editView', function(){
            $('#docEditor div').replaceWith(
                $('<textarea class="docEditorTA" name="name">' + $('#docEditor div').html() + '</textarea>')
            );
        });

        $('.fil1Data').each(function(){
            sL();
            var url = APIURL + $(this).attr('data-api'),
            results = aC('GET', url, {});
            rDF(results);
            $(this).find('textarea').val(results.data.name);
            $('textarea').htmlarea();
            // $(this).html(Mustache.to_html($(this).find('textarea').val(), results.data));
            hL();
        });
    });
</script>